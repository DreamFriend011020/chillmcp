# Repository Guidelines

## Project Structure & Module Organization
- `main.py` houses the Python hackathon server, including state management and tool registration. Keep Python utilities alongside it unless they are broadly reusable.
- `src/` contains the TypeScript implementation (`index.ts` entry point) with subdirectories for `config/`, `tools/`, `resources/`, `prompts/`, and `types/`. Place new modules beside similar functionality and update the barrel files (`index.ts`) when exporting.
- `dist/` stores compiled JavaScript generated by `npm run build`; never edit files there by hand.
- Python-oriented tests live in `test_functions.py` (logic) and `test_server.py` (stdio integration). TypeScript builds rely on compile-time checks and linting until a dedicated test harness is added.

## Build, Test, and Development Commands
- Python setup:
  - `python3 -m venv venv && source venv/bin/activate`
  - `pip install -r requirements.txt`
  - `python main.py --boss_alertness 80 --boss_alertness_cooldown 60`
- Python verification:
  - `python test_functions.py` exercises state transitions and response formatting.
  - `python test_server.py` spins up the stdio server and performs JSON-RPC calls.
- TypeScript workflow:
  - `npm install` to fetch dependencies.
  - `npm run dev` for a hot-reload dev loop, `npm run build` to emit `dist/`, and `npm start` to run the compiled server.
  - `npx @modelcontextprotocol/inspector python main.py` is handy for interactive MCP inspection.

## Coding Style & Naming Conventions
- Python: follow PEP 8 with four-space indentation, snake_case functions, and descriptive docstrings. Keep responses deterministic in structure and prefer pure helpers for probability or timing logic.
- TypeScript: rely on ESLint and Prettier (`npm run lint`, `npm run format`). Use camelCase for variables/functions, PascalCase for types/classes, and avoid default exports so barrel files stay consistent.
- Commit any generated artifacts (e.g., `dist/`) only when necessary for publishing; otherwise, keep builds local.

## Testing Guidelines
- Run both Python scripts before opening a PR, using `--boss_alertness=100` in manual sessions to force boss-alert edge cases. Confirm the 20-second delay at level 5 and stress auto-increment by letting the server idle.
- For the TypeScript server, ensure `npm run build` and `npm run lint` pass. If you add tests, store them under `src/__tests__/` and name files `*.spec.ts`.
- Document any manual MCP client verification in your PR description (parameters used, tool calls exercised).

## Commit & Pull Request Guidelines
- Keep commits small, focused, and written in the imperative mood (e.g., `Add boss cooldown scheduler`). Mixed-language messages are fine, but stay consistent within a branch.
- Reference related issues in the body, note environment details (Python 3.11, Node 18+), and list commands run. Screenshots or terminal captures are encouraged when UI or protocol behavior changes.
- For pull requests, provide: (1) concise summary, (2) testing checklist, (3) rollout considerations (e.g., default flag values). Request review from maintainers covering both Python and TypeScript when changes span implementations.
